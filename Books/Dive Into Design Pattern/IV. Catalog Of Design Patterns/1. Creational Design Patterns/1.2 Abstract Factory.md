
![[oop-37.png]]
# Khái niệm

***Abstract Factory is a creational design pattern that lets you produce families of related objects without specifying their concrete classes.***

- Abstract Factory là một mẫu thiết kế sáng tạo cho phép bạn tạo ra `họ hàng` của các đối tượng liên quan mà không chỉ định các classes cụ thể của họ

# Problem

- Giả sử tạo một trình mô phỏng cửa hàng đồ nội thất
- 1. Dòng SP liên quan: Chair + Sofa + CoffeTable
- 2. Một số variants của các SP:
Chair + Sofa + CoffeTable với các variants: Modern, Victorian, ArtDeco

![[oop-38.png]]

- Bạn cần một cách để tạo các objects nội thất riêng lẻ phù hợp với các objects khác cùng một gia đình

![[oop-39.png]]

- Bạn không muốn thay đổi code hiện có khi add new product hoặc families of products vào program.

- Và các nhà cung cấp nội thất cập nhật catalog của họ rất thường xuyên 

# Solution

- Đầu tiên mà mô hình Abstract Factory gợi ý là declare rõ ràng các interfaces cho từng product riêng biệt của product family(e.g., chair, sofa of coffee table).

- Sau đó bạn có thể làm cho tất cả các variants of products follow theo các interfaces đó. Ex: tất cả chair variants có thể implement Chair interface, tất cả coffee table variants có thể implement CoffeeTable interface, vv.

![[oop-40.png]]


- Tiếp theo là declare Abstract Factory, một interface với list creation methods cho tất cả products thuộc product family(ex: createChair, createSofa, ...)

- Đối với mỗi variant của 1 product family, chúng ta tạo một factory class riêng biệt dựa trên AbstractFactory interface.

- Mỗi factory là 1 class returns products của 1 loại cụ thể

- EX: ModernFactory có thể chỉ tạo ModernChair, ModernSofa & ModernCoffeeTable objects

![[oop-41.png]]


- Client code work với cả factories và products via abstract interfaces tương ứng.

	+ Điều này cho phép bạn thay đổi type of factory pass to client code, cũng như product variant mà client code nhận được, mà ko break code hiện có
	
![[oop-42.png]]
	

- Giả sử client muốn một factory sản xuất một chair.
	+ Client ko cần phải biết factory's class và không quan trọng loại ghế nào
	+ Cho dù đó là kiểu ghế Modern model hay Victorian thì đều như nhau, sử dụng Chair interface
	=> Với cách tiếp cận này, điều duy nhất mà client biết về chair là nó implement sitOn method theo một cách nào đó
	=> Bất kì variant nào của chair returns về đều match với type của sofa hoặc coffee table được produce cùng một factory object
	
- Còn 1 điều nữa cần làm rõ: 
	+ Nếu client chỉ  tiếp xúc với các abstract interfaces, điều gì tạo ra các actual factory objects ?
	+ Thông thường, App tạo concrete factory object ở giai đoạn khởi tạo. Trước đó App phải chọn factory type dựa vào config hoặc env settings
# Structure

![[oop-43.png]]
	
- 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	



























