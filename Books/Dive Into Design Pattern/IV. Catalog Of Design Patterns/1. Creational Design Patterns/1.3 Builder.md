![[oop-46.png]]


# Khái niệm

***Builder is a creational design pattern that lets you construct complex objects step by step. The pattern allows you to produce different types and representations of an object using the same construction code***

- Cho phép bạn xây dựng các objects phức tạp step by step
- Pattern cho phép tạo ra các types và representations(biểu diễn) khác nhau của một đối tượng bằng cách sử dụng cùng một construction code

# Problem

- Hãy tưởng tượng có một object phức tạp đòi hỏi nhiều công sức, từng bước khởi tạo nhiều fields & các nested objects

- Init code như vậy thường được chôn bên trong constructor với rất nhiều parameters. Hoặc thậm chí tệ hơn, code nằm rải rác trên client code


![[oop-47.png]]

- For ex, hãy nghĩ về cách tạo ra một House object
	- Để build một simple house, bạn cần xây dựng 4 bức tường và sàn, install a door, lắp cửa sổ & build một mái nhà
	- Nhưng nếu muốn build một căn nhà lớn hơn, sáng sủa hơn với sân sau & các món quà khác thì sao ?
	
- Giải pháp tốt nhất là mở rộng base House class & tạo một tập hợp subclasses để cover tất cả combinations của parameters
	- Nhưng cuối cùng sẽ kết thúc với rất nhiều classes con
	- Bất kỳ một new parameters, chẳng hạn như porch style, sẽ yêu cầu phát triển hệ thống phân cấp này hơn nữa
- Có 1 cách tiếp cận khác không liên quan đến breeding subclasses. Bạn có thể tạo 1 constructor khổng lồ ngay trong base House class với tất cả params có thể điều khiển House object
	- Mặc dù cách này loại bỏ sự cần thiết của subclasses, tuy nhiên nó tạo ra 1 vấn đề khác

![[oop-48.png]]


- Trong hầu hết các cases, hầu hết các params sẽ không được sử dụng, nó làm cho constructor call khá xấu xí.
	- Chẳng hạn, chỉ một phần nhỏ các ngôi nhà có bể bơi, vì vậy các params liên quan đến bể bơi sẽ vô dụng 9/10


# Solution

- The Builder pattern suggest rằng bạn nên trích xuất object construction code ra khỏi own class của nó và move nó đến các separate objects được gọi là builders

![[oop-49.png]]

- Mô hình tổ chức xây dựng object thành một tập hợp các bước ( buildWalls , buildDoor , etc.)
	- Để tạo một object, bạn execute một loạt các steps này trên một builder object
	- Phần quan trong là bạn không cần phải call tất cả các steps, bạn có thể chỉ call những bước cần thiết để tạo một cấu hình cụ thể của một object
- Một số construction steps có thể yêu cầu implementation khác nhau khi bạn cần build các representations của product. 
-  For ex: Tường của cabin có thể được xây bằng gỗ, nhưng các bức tường lâu dài phải được xây bằng đá
- Trong case này, bạn có thể tạo một số builder classes khác nhau implement cùng một bộ của building steps, nhưng theo một cách khác
	- Sau đó bạn có thể sử dụng những builder này trong construction process (tức là một tập hợp các cuộc gọi có trật tự đến building steps) để sản xuất các objects khác nhau

![[oop-50.png]]
	

- For ex, hãy tưởng tượng một người xây dựng builds mọi thứ với gỗ và kính, cái thứ 2 builds mọi thứ bằng đá và sắt và cái thứ 3 sử dụng vàng và kim cương
	- Bằng cách calling cùng một tập hợp các steps, bạn có thể nhận được regular house từ người xây thứ 1, một lâu đài nhỏ từ người xây thứ 2 và một cung điện từ người xây 3.
	- Tuy nhiên, điều sẽ chỉ work nếu client code calls các bước xây dựng có thể tương tác với builders bằng cách sử dụng một common interface

# Director

- Bạn có thể đi xa hơn & trích xuất một tập hợp các cuộc gọi đến the builder steps bạn sử dụng để constructor a product thành một separate class được gọi là director
- The director class xác định thứ tự thực hiện các building  steps, trong khi trình xây dựng cung cấp việc implemetation cho các bước đó

![[oop-51.png]]


- Có một director class trong your program là không thực sự cần thiết
	- Bạn có thể call the building steps theo một thứ tự cụ thể trực tiếp từ client code
	- Tuy nhiên, director class sẽ có thể là một nơi tốt để đặt các various construction routines để bạn có thể reuse chúng trong your program
- Ngoài ra, director class hoàn toàn che dấu các details xây dựng products khỏi client code
		- Client chỉ cần associate một builder với một director, launch construction với director, và nhận result từ builder
- 





