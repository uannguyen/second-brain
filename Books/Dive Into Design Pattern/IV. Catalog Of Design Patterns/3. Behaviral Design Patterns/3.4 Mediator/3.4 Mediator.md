
![[oop-152.png]]

# Concept

***Mediator is a behavioral design pattern that lets you reduce chaotic dependencies between objects. The pattern restricts direct communications between the objects and forces them to collaborate only via a mediator object***

- Là pattern cho phép giảm sự phụ thuộc hỗn loạn giữa các đối tượng
	- Pattern hạn chế giao tiếp trực tiếp giữa các đối tượng & buộc chúng phải hợp tác thông qua đối tượng mediator

# Problem

- Giả sử có một dialog để creating & editing customer profiles
	- Bao gồm nhiều form controls như: text fields, checkboxes, buttons, etc.

![[oop-153.png]]

- Một số form elements có thể tương tác với những elements khác
	- For instance: 
		- selecting "I have a dog" checkbox có thể xuất hiện thêm một field ẩn để nhập dog's name
		- Submit button có thể phải validation value của tất cả các fields trước khi saving data
		
![[oop-154.png]]

- Bằng cách implements logic này trực tiếp bên trong code của form elements, sẽ làm cho elements' classes khó reuse trong những form khác của app
	- Ex: không thể reuse checkbox class cho một form khác, vì nó coupled với dog's text field
		- Có nghĩa là phải sử dụng tất cả các classes liên quan đến việc hiển thị profile dialog hoặc ko sử dụng gì cả

# Solution

- Mediator pattern gợi ý rằng nên ngừng việc giao tiếp trực tiếp giữa các components cần thực hiện độc lập với nhau
	- Thay vào đó, các components phải collaborate gián tiếp, bằng cách calling special mediator object chuyển hướng các cuộc gọi đến các components thích hợp
	- Kết quả là, components chỉ phụ thuộc vào single mediator class thay vì phải coupled với hàng chục components khác

![[oop-155.png]]

- Ở ví dụ profile editing form, dialog class có thể đóng vai trò như là mediator
	- Nhiều khả năng, dialog class đã nhận thức được tất cả các sub-elements của nó, vì vậy thậm chí không cần phải introduce new dependencies vào class này
- Đến với submit button, trước đây mỗi khi click button này, nó phải validate values của tất cả form elements một cách riêng lẻ
	- Giờ thì công việc của nó chỉ là notify cho dialog về click
	- Khi nhận được notification, dialog sẽ tự thực hiện validations hoặc pass task to elements riêng lẻ
	- Do đó, thay vì bị ràng buộc với hàng tá form elements, button chỉ cần phụ thuộc vào dialog class

