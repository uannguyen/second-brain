
![[oop-167.png]]

# Concept

***Observer is a behavioral design pattern that lets you define a subscription mechanism to notify multiple objects about any events that happen to the object they’re observing.***

- Observer là một mẫu thiết kế cho phép bạn xác định một cơ chế đăng ký để thông báo cho nhiều đối tượng về bất kỳ sự kiện nào xảy ra với đối tượng mà họ đang quan sát

---

- Hãy tưởng tượng bạn có một kênh YouTube và rất nhiều người đăng ký (subscribers) kênh của bạn. Mỗi khi bạn đăng video mới, tất cả những người đăng ký sẽ nhận được thông báo tự động mà bạn không cần phải gửi tin nhắn cho từng người.
	- **Kênh YouTube** là "subject" - nó là đối tượng phát ra thông báo.
	- **Subscribers (người đăng ký)** là "observers" - họ là những người nhận được thông báo khi có video mới.

## Problem

- Hãy tưởng tượng rằng bạn có 2 loại object: `Customer` & `Store`
	- Customer rất quan tâm đến một SP thuộc brand cụ thể(Iphone,...) sắp có hàng ở store
	
- The customer có thể visit the store every day & check SP có hàng chưa
	- Nhưng như vậy rất mất công vì ai biết được SP khi nào mới có hàng ?
	
![[oop-168.png]]

- Mặt khác, store có thể send hàng tấn emails đến all customers mỗi khi có new product
	- Điều này đỡ mất công customers đi đến store dể check mỗi ngày
	- Đồng thời đỡ làm phiền khác customers khác đến store mua hàng & họ ko quan tâm đến SP mới

- Và sẽ có một cuộc xung đột xảy ra:
	- Một là customer lãng phí time để ra store check product availability
	- Hai là store lãng phí tài nguyên thông báo sai tệp customer, thay vì chỉ notify cho đúng tệp customer đang chờ new product thì lại notify all customers
	

# Solution

- Object có some interesting state thường called `subject`
	- Nhưng vì nó sẽ notify cho other objects về việc những thay đổi đối với trạng thái của nó, called `publisher`
	- All other objects muốn to track changes đối với publisher's state được call là `subscribers`
	
- Observer pattern suggests rằng bạn thêm cơ chế đăng ký(subscription mechanism) cho the publisher class để các individual objects có thể subscribe or unsubcribe khỏi stream of events đến từ publisher đó
	- 