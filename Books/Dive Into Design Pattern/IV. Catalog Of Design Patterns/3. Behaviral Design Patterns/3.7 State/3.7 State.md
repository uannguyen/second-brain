
![[oop-174.png]]

# Concept

***State is a behavioral design pattern that lets an object alter its behavior when its internal state changes. It appears as if the object changed its class.***

- State là mẫu thiết kế hành vi cho phép một object thay đổi behavior của nó khi state thay đổi. Nó xuất hiện như thể object đã thay đổi class của nó

# Problem

- State pattern có liên quan chặt chẽ đến concept **Finite-State Machine**

![[oop-175.png]]

- Ý tưởng chính là tại bất kỳ một thời điểm nào, chỉ có một số lượng hữu hạn states mà một program có thể có
	- Trong bất kì unique state, the program hoạt động khác nhau và có thể switched từ state sang state khác ngay lập tức
	- Tuy nhiên, tùy thuộc vào current state mà program có thể hoặc không thể switch sang state khác
	- Các quy tắc switching này called `transitions`, cũng hữu hạn(finite) và được xác định trước(predetermined)

- Ta cũng có thể apply phương pháp này cho objects
	- Giả sử có `Document` class, document có 3 states: `Draft`, `Moderation` and `Published`
	- The `publish` method của document works hơi khác nhau một chút ở mỗi state:
		- `Draft` sẽ moves the document to moderation
		- `Moderation` sẽ makes the document public, nhưng chỉ khi current user là adminstrator
		- `Published` sẽ không làm gì cả

![[oop-176.png]]

- State machines thường implemented với nhiều conditional operators (`if` or `switch`) để select behavior thích hợp tùy thuộc vào current state
	- Thường thì "state" chỉ là một tập hợp values của object's fields

















