
![[oop-71.png]]

# Khái niệm

***Adapter is a structural design pattern that allows objects with incompatible interfaces to collaborate***

- Bộ điều hợp là một mẫu thiết kế cấu trúc cho phép các đối tượng có giao diện không tương thích với nhau cộng tác 

# Problem

- Tưởng tưởng rằng bạn tạo 1 ứng dụng giám sát thị trường chứng khoán
	+ Dữ liệu được downloads từ nhiều nguồn với XML format
	+ Sau đó phải convert data XML thành các charts & diagrams cho user
	
- Thường thì ta sẽ dùng thư viện 3rd-party để xử lý thay vì code chay
	+ Nhưng có một nhược điểm đó là analytics library chỉ hoạt động với JSON data

![[oop-72.png]]

- Mặc dù có thể thay đổi bằng cách tìm library work với XML, tuy nhiên điều này có thể làm break code hiện có dựa trên library này

	- Và tệ hơn là dù có tìm được library work với XML thì chưa chắc có quyền truy cập vào library's source code


# Solution

- Có thể tạo một Adapter
	- Adapter này là một special object chuyển đổi interface của một object để một object khác có thể hiểu nó
	
- Một adapter wraps một trong các objects để che giấu sự complexity(phức tạp) của sự chuyển đổi xảy ra phía sau hậu trường
	- Wrapped object thậm chí không nhận thức được adapter
	- Ex: ta có thể wrap một object hoạt động theo meters & kilometers với một adapter để converts tất cả data sang đơn vị quốc tế như feet & miles
	
- Adapters không chỉ có thể convert data thành various formats mà cũng có thể giúp objects có interfaces khác nhau cộng tác

- Cách nó works:
	- 1. Adapter nhận một interface, tương thích với một trong các objects hiện có
	- 2. Dùng interface này, existing object có thể call các adapter's methods một cách an toàn
	- 3. Khi nhận được call, adapter truyền request đến object thứ hai, nhưng trong một format và thứ tự mà object thứ hai mong đợi
	
- Đôi khi ta có thể tạo adapter hai chiều có thể converts the calls theo cả hai hướng
	
	![[oop-73.png]]

- Hãy quay lại với app thị trường chứng khoán
	- Để giải quyết vấn đề formats không tương thích, ta có thể tạo một XML-to-JSON adapters cho mọi class của analytics library mà code hoạt động trực tiếp
	- Sau đó điều chỉnh code để giao tiếp với library thông qua các adapters này
	- Khi adapter nhận một call, nó dịch XML data thành JSON structure và chuyển lệnh call đến các methods tích hợp của wrapped analytics object
	

# Real-World Analogy

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	












	